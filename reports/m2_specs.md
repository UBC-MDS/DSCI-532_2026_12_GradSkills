# Dashboard Specifications

Here are the dashboard specs for M2:

## Job Stories

| #   | Job Story                       | Status         | Notes                         |
| --- | ------------------------------- | -------------- | ----------------------------- |
| 1   | As a prospective graduate student, I want to filter employment outcomes by degree level and field of study, so that I can compare whether pursuing a Master's degree improves employment rates and salary.|  |                               |
| 2   | As a student exploring job opportunities, I want to compare top industries in my field so that I can target high-demand sectors.|       |  |
| 3   | As a career advisor, I want to visualize employment rates at both 6 and 12 months so that I can evaluate short-term versus longer-term employment stability for graduates.|   | 
| 4   | As a university administrator, I want to view top-performing universities under specific filters so that I can benchmark institutional performance.|   |                               |


## Component Inventory

| ID | Type | Shiny widget / renderer | Depends on | Job Stories |
|----|------|-------------------------|------------|-------------|
| `region` | Input | `ui.input_checkbox_group()` | - | #1, #2, #3, #4 |
| `country` | Input | `ui.input_checkbox_group()` | - | #1, #2, #3, #4 |
| `study` | Input | `ui.input_checkbox_group()` | - | #1, #2, #3, #4 |
| `degree_level` | Input | `ui.input_checkbox_group()` | - | #1 |
| `industry` | Input | `ui.input_checkbox_group()` | - | #1, #2, #3, #4 |
| `grad_year` | Input | `ui.input_slider()` | - | #1, #2, #3, #4 |
| `reset_btn` | Input | `ui.input_action_button()` | - | #1, #2, #3, #4 |
| `university_table_selected_rows` | Input | DataGrid row selection (generated by `university_table`) | `university_table` | #2, #4 |
| `_reset_filters` | Reactive effect | `@reactive.effect` + `@reactive.event(input.reset_btn)` | `reset_btn` | #1, #2, #3, #4 |
| `update_countries_by_region` | Reactive effect | `@reactive.effect` + `@reactive.event(input.region, input.reset_btn)` | `region`, `reset_btn` | #1, #2, #3, #4 |
| `filtered_data` | Reactive calc | `@reactive.calc` | `region`, `country`, `study`, `degree_level`, `industry`, `grad_year` | #1, #2, #3, #4 |
| `top_uni` | Reactive calc | `@reactive.calc` | `filtered_data` | #4 |
| `filter_data_by_university` | Reactive calc | `@reactive.calc` | `filtered_data`, `top_uni`, `university_table_selected_rows` | #2, #4 |
| `emp_rate_6` | Output | `@render.ui` | `filtered_data` | #3 |
| `emp_rate_12` | Output | `@render.ui` | `filtered_data` | #3 |
| `starting_salary` | Output | `@render.ui` | `filtered_data` | #1 |
| `university_table` | Output | `@render.data_frame` + `@render.DataGrid()` | `top_uni` | #4 |
| `industries_bar` | Output | `@render_altair` | `filter_data_by_university` | #2 |
| `study_salary_plot` | Output | `@render_altair` | `filter_data_by_university`, `university_table_selected_rows` | #1 |

## Reactivity Diagram

```mermaid
flowchart TD
  region[/region/] & country[/country/] & study[/study/] & degree_level[/degree_level/] & industry[/industry/] & grad_year[/grad_year/] --> filtered_data{{filtered_data}}

  reset_btn[/reset_btn/] --> _reset_filters{{_reset_filters}}
  reset_btn[/reset_btn/] --> update_countries_by_region{{update_countries_by_region}}
  region[/region/] --> update_countries_by_region
  _reset_filters --> region & study & industry & grad_year & degree_level
  update_countries_by_region --> country

  filtered_data --> emp_rate_6([emp_rate_6]) & emp_rate_12([emp_rate_12]) & starting_salary([starting_salary]) & top_uni{{top_uni}}
  top_uni --> university_table([university_table]) --> university_table_selected_rows[/university_table_selected_rows/]

  filtered_data & top_uni & university_table_selected_rows --> filter_data_by_university{{filter_data_by_university}}
  filter_data_by_university --> industries_bar([industries_bar]) & study_salary_plot([study_salary_plot])
  university_table_selected_rows --> study_salary_plot
```

## Calculation Details

### `filtered_data`

**Depends on:**

- `region`
- `country`
- `study`
- `degree_level`
- `industry`
- `grad_year`

**Transformations performed:**

**Consumed by:**

### `top_uni`

**Depends on:**

- `filtered_data`

**Transformations performed:**

**Consumed by:**

### `filter_data_by_university`

**Depends on:**

- `filtered_data`
- `top_uni`
- `university_table_selected_rows`

**Transformations performed:**

**Consumed by:**